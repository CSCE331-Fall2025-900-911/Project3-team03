<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Employee Page</title>
        <link rel="stylesheet" href="/EmployeePageCSS.css" />
        <link rel="stylesheet" href="/Accessibility.css" />
    </head>
    <body>
        <!-- add header remark for accessibility -->
        <h1 class="visually-hidden">Employee Page</h1>

        <!-- dark blue bar and logo -->
        <header class="header-container">
            <nav class="nav-left">
                <a id="logoutBtn">Log Out</a>
            </nav>
            <div class="logo-container">
                <a href="/"><img src="/logo.png" alt="Yi Fang Logo" class="logo" /></a>
            </div>
        </header>

        <div
            id="cart-notification"
            class="cart-notification"
            role="status"
            aria-live="polite"
            hidden
        >
            Successfully Completed Order
        </div>

        <main class="wrap-white-box">
            <div class="white-box stack">
                <h1>Welcome Back!</h1>
                <a class="button button-dark" href="/cashier">Place New Order</a>
                <a class="button button-dark" href="/manager">Manager View</a>
            </div>
        </main>

        <!-- dark blue bar and logo -->
        <footer class="header-container">
            <div class="logo-container">
                <a href="/"><img src="/logo.png" alt="Yi Fang Logo" class="logo" /></a>
            </div>
        </footer>

        <%- include("accessibilityFeaturesPage") %>
        <script type="module" src="/js/ADHDFocus.js"></script>
        <script src="/js/translation.js"></script>
        <script src="/js/textToSpeech.js"></script>

        <!--Z Report when LogOut-->
        <script type="module">
            async function handleLogoutClick(event) {
                try {
                    const res = await fetch('/api/zreport');
                    const report = await res.json();

                    const r = report[0];

                    alert(`
                    Z REPORT for ${new Date().toLocaleString()}
                    Number of Sales: ${r.num_sales}
                    Total Sales: $${r.total_sales}
                    Discards: ${r.discards}
                    Employees Worked: ${r.employees}`);
                } catch (err) {
                    console.error('Z Report failed to load', err);
                }

                window.location.href = '/logout';
            }

            document.addEventListener('DOMContentLoaded', () => {
                const logoutBtn = document.getElementById('logoutBtn');
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', handleLogoutClick);
                }
            });
        </script>

        <script src="/js/createOrderNotification.js"></script>

        <script>
            try {
                localStorage.removeItem('yf_cart_v1');
            } catch (e) {}
        </script>
    </body>
</html>
