<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Manager Dashboard</title>
        <link rel="stylesheet" href="/ManagerPageCSS.css" />
        <link rel="stylesheet" href="/Accessibility.css" />
        <!-- Chart.js CDN -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>
    <body>
        <!-- Top bar -->
        <header class="header-container">
            <div class="logo-container">
                <a href="/"><img src="/logo.png" alt="Yi Fang Logo" class="logo" /></a>
            </div>
            <nav class="nav">
                <a class="nav-link" href="/employee">Employee</a>
                <a class="nav-link active" href="/manager">Manager</a>
                <a class="nav-link" href="/cashier">Cashier</a>
                <a href="/logout">Log Out</a>
            </nav>
        </header>

        <main class="container">
            <h1 class="page-title">Manager Dashboard</h1>

            <div class="tabs">
                <button class="tab-btn active" data-tab="sales">Sales</button>
                <button class="tab-btn" data-tab="profit">Profit</button>
                <button class="tab-btn" data-tab="inventory">Inventory</button>
                <button class="tab-btn" data-tab="employees">Employees</button>
                <button class="tab-btn" data-tab="reports">Reports</button>
            </div>

            <!-- Sales -->
            <section id="tab-sales" class="tab active">
                <div class="grid">
                    <div class="card">
                        <h2>Sales by Drink</h2>
                        <table class="table" id="sales-table">
                            <thead>
                                <tr>
                                    <th>Drink ID</th>
                                    <th>Sales</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="card">
                        <h2>Sales Chart</h2>
                        <div class="chart-container">
                            <canvas id="sales-chart" height="220"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Profit -->
            <section id="tab-profit" class="tab">
                <div class="grid">
                    <div class="card">
                        <h2>Revenue & Orders</h2>
                        <table class="table" id="profit-table">
                            <thead>
                                <tr>
                                    <th>Drink ID</th>
                                    <th>Revenue (avg/wk)</th>
                                    <th>Total Orders</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="card">
                        <h2>Top Revenue (Bar)</h2>
                        <div class="chart-container">
                            <canvas id="profit-chart" height="220"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Inventory -->
            <section id="tab-inventory" class="tab">
                <div class="grid">
                    <div class="card" style="align-self: start">
                        <h2>Add/Edit Inventory</h2>
                        <form id="inventory-form">
                            <input type="hidden" id="inventory-id" />
                            <div style="margin-bottom: 10px">
                                <label
                                    for="inventory-item"
                                    style="display: block; margin-bottom: 4px"
                                    >Item Name:</label
                                >
                                <input
                                    type="text"
                                    id="inventory-item"
                                    required
                                    style="
                                        width: 100%;
                                        padding: 6px;
                                        border: 1px solid #cbd5e1;
                                        border-radius: 6px;
                                    "
                                />
                            </div>
                            <div style="margin-bottom: 10px">
                                <label
                                    for="inventory-quantity"
                                    style="display: block; margin-bottom: 4px"
                                    >Quantity:</label
                                >
                                <input
                                    type="number"
                                    id="inventory-quantity"
                                    required
                                    style="
                                        width: 100%;
                                        padding: 6px;
                                        border: 1px solid #cbd5e1;
                                        border-radius: 6px;
                                    "
                                />
                            </div>
                            <div style="margin-bottom: 10px">
                                <label
                                    for="inventory-price"
                                    style="display: block; margin-bottom: 4px"
                                    >Price:</label
                                >
                                <input
                                    type="number"
                                    step="0.01"
                                    id="inventory-price"
                                    required
                                    style="
                                        width: 100%;
                                        padding: 6px;
                                        border: 1px solid #cbd5e1;
                                        border-radius: 6px;
                                    "
                                />
                            </div>
                            <div style="display: flex; gap: 8px">
                                <button type="submit" class="button" id="inventory-submit-btn">
                                    Add Item
                                </button>
                                <button
                                    type="button"
                                    class="button"
                                    id="inventory-cancel-btn"
                                    style="display: none; background: #6b7280"
                                >
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                    <div class="card">
                        <h2>Current Inventory</h2>
                        <table class="table" id="inventory-table">
                            <thead>
                                <tr>
                                    <th>Item</th>
                                    <th>Quantity</th>
                                    <th>Price</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Employees -->
            <section id="tab-employees" class="tab">
                <div class="grid">
                    <div class="card">
                        <h2>Add/Edit Employee</h2>
                        <form id="employee-form">
                            <input type="hidden" id="employee-id" />
                            <div style="margin-bottom: 10px">
                                <label
                                    for="employee-name"
                                    style="display: block; margin-bottom: 4px"
                                    >Name:</label
                                >
                                <input
                                    type="text"
                                    id="employee-name"
                                    required
                                    style="
                                        width: 100%;
                                        padding: 6px;
                                        border: 1px solid #cbd5e1;
                                        border-radius: 6px;
                                    "
                                />
                            </div>
                            <div style="margin-bottom: 10px">
                                <label
                                    for="employee-permissions"
                                    style="display: block; margin-bottom: 4px"
                                    >Permissions:</label
                                >
                                <input
                                    type="text"
                                    id="employee-permissions"
                                    required
                                    style="
                                        width: 100%;
                                        padding: 6px;
                                        border: 1px solid #cbd5e1;
                                        border-radius: 6px;
                                    "
                                />
                            </div>
                            <div style="margin-bottom: 10px">
                                <label
                                    for="employee-gender"
                                    style="display: block; margin-bottom: 4px"
                                    >Gender:</label
                                >
                                <input
                                    type="text"
                                    id="employee-gender"
                                    required
                                    style="
                                        width: 100%;
                                        padding: 6px;
                                        border: 1px solid #cbd5e1;
                                        border-radius: 6px;
                                    "
                                />
                            </div>
                            <div style="margin-bottom: 10px">
                                <label
                                    for="employee-email"
                                    style="display: block; margin-bottom: 4px"
                                    >Email:</label
                                >
                                <input
                                    type="email"
                                    id="employee-email"
                                    required
                                    style="
                                        width: 100%;
                                        padding: 6px;
                                        border: 1px solid #cbd5e1;
                                        border-radius: 6px;
                                    "
                                />
                            </div>
                            <div style="display: flex; gap: 8px">
                                <button type="submit" class="button" id="submit-btn">
                                    Add Employee
                                </button>
                                <button
                                    type="button"
                                    class="button"
                                    id="cancel-btn"
                                    style="display: none; background: #6b7280"
                                >
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                    <div class="card">
                        <h2>Employees</h2>
                        <table class="table" id="employees-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Permissions</th>
                                    <th>Gender</th>
                                    <th>Email</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Reports -->
            <section id="tab-reports" class="tab">
                <div class="grid">
                    <!-- Left: list of reports -->
                    <div class="card">
                        <h2>Reports</h2>
                        <table class="table" id="reports-table">
                            <thead>
                                <tr>
                                    <th>Report Name</th>
                                    <th>Created By (Employee ID)</th>
                                </tr>
                            </thead>
                            <tbody>

                            </tbody>
                        </table>
                    </div>

                    <!-- Middle: report details -->
                    <div class="card">
                        <h2 id="report-detail-title">Report Details</h2>
                        <div
                            id="report-detail-content"
                            style="margin-top: 8px; white-space: pre-wrap;"
                        >
                            <p style="color: #6b7280; margin: 0;">
                                Select a report on the left to view its contents.
                            </p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h2>Create Report</h2>
                        <!-- Create Report-->
                        <form id="report-create-form">
                            <div style="margin-bottom:10px;">
                                <label for="create-report-name" style="display:block; margin-bottom:4px;">
                                    Report Name
                                </label>
                                <input
                                    type="text"
                                    id="create-report-name"
                                    style="
                                        width:100%;
                                        padding:6px;
                                        border:1px solid #cbd5e1;
                                        border-radius:6px;
                                    "
                                    placeholder="Enter report title..."
                                    required
                                />
                            </div>

                            <div style="margin-bottom:10px;">
                                <label for="create-report-created-by" style="display:block; margin-bottom:4px;">
                                    Created By (Employee ID)
                                </label>
                                <input
                                    type="number"
                                    id="create-report-created-by"
                                    style="
                                        width:100%;
                                        padding:6px;
                                        border:1px solid #cbd5e1;
                                        border-radius:6px;
                                    "
                                    placeholder="e.g. 1"
                                    required
                                />
                            </div>

                            <div style="margin-bottom:10px;">
                                <label for="create-report-content" style="display:block; margin-bottom:4px;">
                                    Report Details
                                </label>
                                <textarea
                                    id="create-report-content"
                                    rows="8"
                                    style="
                                        width:100%;
                                        padding:6px;
                                        border:1px solid #cbd5e1;
                                        border-radius:6px;
                                        resize:vertical;
                                    "
                                    placeholder="Enter the body of the report..."
                                    required
                                ></textarea>
                            </div>

                            <div style="display:flex; gap:8px;">
                                <button type="submit" class="button" id="report-create-btn">
                                    Create Report
                                </button>
                            </div>
                        </form>

                        <!-- X-Report -->
                        <hr style="margin:16px 0; border:none; border-top:1px solid #e5e7eb;" />

                        <h3 style="margin-top:0;">Generate X-Report</h3>
                        <form id="xreport-form">
                            <div style="margin-bottom:10px;">
                                <label for="xreport-date" style="display:block; margin-bottom:4px;">
                                    Report Date
                                </label>
                                <input
                                    type="date"
                                    id="xreport-date"
                                    style="
                                        width:100%;
                                        padding:6px;
                                        border:1px solid #cbd5e1;
                                        border-radius:6px;
                                    "
                                    required
                                />
                            </div>

                            <button type="submit" class="button" id="xreport-generate-btn">
                                Generate X-Report
                            </button>
                        </form>

                        <!-- Sales Report -->
                        <hr style="margin:16px 0; border:none; border-top:1px solid #e5e7eb;" />

                        <h3 style="margin-top:0;">Generate Sales Report</h3>
                        <form id="sales-report-form">
                            <div style="margin-bottom:10px;">
                                <label for="sales-report-from" style="display:block; margin-bottom:4px;">
                                    From Date
                                </label>
                                <input
                                    type="date"
                                    id="sales-report-from"
                                    style="
                                        width:100%;
                                        padding:6px;
                                        border:1px solid #cbd5e1;
                                        border-radius:6px;
                                    "
                                    required
                                />
                            </div>

                            <div style="margin-bottom:10px;">
                                <label for="sales-report-to" style="display:block; margin-bottom:4px;">
                                    To Date
                                </label>
                                <input
                                    type="date"
                                    id="sales-report-to"
                                    style="
                                        width:100%;
                                        padding:6px;
                                        border:1px solid #cbd5e1;
                                        border-radius:6px;
                                    "
                                    required
                                />
                            </div>

                            <button type="submit" class="button" id="sales-report-generate-btn">
                                Generate Sales Report
                            </button>
                        </form>
                    </div>
                </div>
            </section>
        </main>

        <footer class="header-container">
            <div class="logo-container">
                <a href="/"><img src="/logo.png" alt="Yi Fang Logo" class="logo" /></a>
            </div>
        </footer>

        <%- include("accessibilityFeaturesPage") %>
        <script type="module" src="/js/ADHDFocus.js"></script>
        <script src="/js/translation.js"></script>
        <script src="/js/textToSpeech.js"></script>

        <script src="/js/managerPage.js"></script>
    </body>
</html>
